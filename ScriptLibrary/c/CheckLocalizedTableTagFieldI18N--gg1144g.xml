<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<recordset table="ScriptLibrary">
  <record id="name=&quot;CheckLocalizedTableTagFieldI18N&quot;" recordid="CheckLocalizedTableTagFieldI18N">
    <name type="string">CheckLocalizedTableTagFieldI18N</name>
    <script type="string">//////////////////////////////////////////////////////////////////
//Check Localized Tables Tag Field I18N Support Start.
//////////////////////////////////////////////////////////////////
var z = 0;
function CheckLocalizedTableTagFieldI18N(tableName, localizedField, startDate, filePath)
{
  var table = new SCFile(tableName, SCFILE_READONLY);
  var sql = true;// "sysmodtime&gt;'" + startDate + "'";
  var ret = table.doSelect(sql);
  while (ret == RC_SUCCESS) {
    tagFieldLocalizable(table, tableName, localizedField, filePath)
    ret = table.getNext();
  }   
}

function CheckAllLocalizedTableTagFieldsI18N(startDate, filePath)
{
  var datadict = new SCFile("datadict", SCFILE_READONLY);
  var sql = "localizedTable=true";
  var ret = datadict.doSelect(sql);
  while (ret == RC_SUCCESS) {
    var tableName = datadict["name"];   
    var localizedField = datadict["localizedField"];     
    CheckLocalizedTableTagFieldI18N(tableName, localizedField, startDate, filePath);
    ret = datadict.getNext();
  }  
  print("Total Localized Tables Tag Field un-localized count is: " + z); 
  z = 0;
}

function tagFieldLocalizable(table, tableName, localizedField, filePath)
{

  var message = table[localizedField];
  //print(settingsConfig);
  var scmessage = new SCFile("scmessage", SCFILE_READONLY);  
  var msgClass = "local:"+tableName;    
  //var messageid = setting + ";" + id;
       
  var tag = new SCDatum();
  system.functions.tag(tag, table);
  var index = system.functions.index(";" , tag) + 1;

  if ( index &gt;= 0 )
  {
	var lng = system.functions.lng(tag);
	tag = system.functions.substr( tag, index, lng );
  }
  //print(tag);
  var sql = "syslanguage=\"" + "en\"" + " and class=\"" + msgClass + "\" and message.id=\"" + tag + "\"";
     
  var ret = scmessage.doSelect(sql);
  if(ret != RC_SUCCESS)
  {
    var str = "Localized Table | \"" + tableName + "\"" + ", its record \"" + tag + "\" has no scmessage.";
    print(str);
    writeFile(filePath, "a", str + "\n");
    z++;
  }    
}
//////////////////////////////////////////////////////////////////
//Check Localized Tables Tag Field I18N Support End.
//////////////////////////////////////////////////////////////////

//var startDate = "09/30/2013 00:00:00";
//CheckAllLocalizedTableTagFieldsI18N(startDate);

</script>
    <package type="string">AppsI18NTest</package>
    <sysmodtime type="dateTime">06/15/21 00:48:32</sysmodtime>
    <sysmoduser type="string">falcon</sysmoduser>
    <sysmodcount type="decimal">0</sysmodcount>
    <prgnsystem NullValue="1" type="boolean"/>
    <sysrestricted NullValue="1" type="boolean"/>
  </record>
</recordset>
