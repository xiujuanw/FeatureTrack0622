<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<recordset table="ScriptLibrary">
  <record id="name=&quot;RiskGroupService&quot;" recordid="RiskGroupService">
    <name type="string">RiskGroupService</name>
    <script type="string">var _ = lib.Underscore.require();
var $ = lib.c.$;

function RiskGroupService(){

  //import helper functions
  var HELPERS = lib.RiskGroupHelpers;
  
  
  function test(){
  	print("run init riskgroup service");
  }

  /*
  * RiskGroupService singleton object, shared by all sessions in one login.
  */
  return {
  
  	initFields: function(){
//  		print("run init riskgroup service");
  	},
  	
    initRiskFactorsInfo: function(record){
      
      lib.RiskCalculationUtil.initRiskFactors(record);
    },
    refreshTotalSocre: function(record){
      var totalScoreStr = HELPERS.refreshTotalScore(record);
      record["total.score"] = totalScoreStr;
      
    },
    processAddActions: function(record){
      record = record?record:vars.$L_file;
      var rv = HELPERS.processAddActions(record);
      if (rv) {
      	vars.$newRiskFactorId = rv;
      }
    }
  };
}

function getClass() {
  return $(new RiskGroupService());
}
</script>
    <package type="string">ChangeManagement</package>
    <sysmodtime type="dateTime">05/26/19 14:37:37</sysmodtime>
    <sysmoduser type="string">zhangqi</sysmoduser>
    <sysmodcount type="decimal">3</sysmodcount>
    <prgnsystem NullValue="1" type="boolean"/>
    <sysrestricted type="boolean">true</sysrestricted>
  </record>
</recordset>
