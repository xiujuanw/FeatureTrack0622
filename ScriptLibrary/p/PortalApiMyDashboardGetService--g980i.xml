<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<recordset table="ScriptLibrary">
  <record id="name=&quot;PortalApiMyDashboardGetService&quot;" recordid="PortalApiMyDashboardGetService">
    <name type="string">PortalApiMyDashboardGetService</name>
    <script type="string">

_str     = system.functions.str;
var JSON = lib.JSON.json();

function doGetAction4MyDashboard(actionURLs, actionParam)
{
  var objRtn = "";
  var actionName = actionURLs[1];
  
  switch (actionName) {
    case "mypendingapprovals":
      objRtn = getMyPendingApprovals();
      break;
    default:
      objRtn = {};	
  }

  return objRtn;
}

//api/mydashboard/mypendingapprovals
function getMyPendingApprovals()
{
  var sql = lib.PortalApiRequestGetService.genPendingApprovalSQL();

  var objFile = new SCFile("Approval", SCFILE_READONLY);
  var nCount = objFile.doCount(sql);

  return _str(nCount);
}
</script>
    <package type="string">Portal</package>
    <sysmodtime type="dateTime">10/24/16 20:42:54</sysmodtime>
    <sysmoduser type="string">falcon</sysmoduser>
    <sysmodcount type="decimal">1</sysmodcount>
    <prgnsystem NullValue="1" type="boolean"/>
    <sysrestricted NullValue="1" type="boolean"/>
  </record>
</recordset>
