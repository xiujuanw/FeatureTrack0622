<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<recordset table="ScriptLibrary">
  <record id="name=&quot;GatewayAPI_KM_Statistic&quot;" recordid="GatewayAPI_KM_Statistic">
    <name type="string">GatewayAPI_KM_Statistic</name>
    <script type="string">var NORMAL_EXIT = lib.GatewayAPI_Constants.NORMAL_EXIT();
var BAD_VALIDATION_EXIT = lib.GatewayAPI_Constants.BAD_VALIDATION_EXIT();
var setExitType = lib.GatewayAPI_Util.setExitType;
var setErrorMsg = lib.GatewayAPI_Util.setErrorMsg;
var getCurrentOperator = lib.GatewayAPI_Util.getCurrentOperator;
var newId = lib.KMSearchHistory.newId;


var log = lib.GatewayAPI_Logger.log("GatewayAPI_KM_Statistic");

function createSearchHistory() {
	setExitType(BAD_VALIDATION_EXIT);
	var searchHistory = new SCFile("kmsearchhistory");
	var inFile = vars.$L_file;
	searchHistory.id = newId();
    searchHistory.query = inFile.query;
    searchHistory.hits = inFile.hits;
    if(inFile.contexttag != null)
    	searchHistory.contexttag = inFile.contexttag;
   	searchHistory.SMA = true;
    searchHistory.escalated = false;
    searchHistory.userid = system.functions.operator();
	searchHistory.doInsert();
	setExitType(NORMAL_EXIT);
}

function viewKMDoc() {
	setExitType(BAD_VALIDATION_EXIT);
	var inFile = vars.$L_file;
	lib.KMUsageHistory.viewed(inFile.kmid, "kmdocument");
	setExitType(NORMAL_EXIT);
}</script>
    <package type="string">ScAPI</package>
    <sysmodtime type="dateTime">06/15/21 00:48:34</sysmodtime>
    <sysmoduser type="string">falcon</sysmoduser>
    <sysmodcount type="decimal">0</sysmodcount>
    <prgnsystem NullValue="1" type="boolean"/>
    <sysrestricted NullValue="1" type="boolean"/>
  </record>
</recordset>
