<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<recordset table="enclapplrev">
  <record id="application.name=&quot;us.notify&quot;" recordid="us.notify">
    <application.name type="string">us.notify</application.name>
    <rev.array sctype="array">
      <rev.array sctype="structure">
        <rev.name type="string">zhouanqing</rev.name>
        <rev.date type="dateTime">09/11/19 21:20:03</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Support attaching corporate image in the notification html email templates</rev.desc>
          <rev.desc sctype="string">Trim htmltemplates tag from the subject of notification mail</rev.desc>
        </rev.desc>
        <change.no type="decimal">152308</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">qiqingsong</rev.name>
        <rev.date type="dateTime">06/03/19 15:46:28</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Add Group Email in process.grp.users</rev.desc>
        </rev.desc>
        <change.no type="decimal">152794</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">zhouanqing</rev.name>
        <rev.date type="dateTime">05/27/19 08:40:18</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">AGMRQ10H52094</rev.desc>
          <rev.desc sctype="string">QCCR1E152197</rev.desc>
          <rev.desc sctype="string">Support notification with attachment only for email but not mail</rev.desc>
        </rev.desc>
        <change.no type="decimal">152197</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">zhouanqing</rev.name>
        <rev.date type="dateTime">03/21/19 15:42:32</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">AGMRQ10H52094</rev.desc>
          <rev.desc sctype="string">QCCR1E152197</rev.desc>
          <rev.desc sctype="string">Support notification with attachment</rev.desc>
        </rev.desc>
        <change.no type="decimal">52094</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">hanrui</rev.name>
        <rev.date type="dateTime">06/22/15 00:54:35</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">start panel: modified "$L.void=rtecall("tagquery", $L.rc, $L.file.copy, $L.record.query, $L.tag)" to "$L.void=rtecall("tagquery", $L.rc, $L.file.copy, $L.record.query, $L.tag, false)" to improve the performance</rev.desc>
        </rev.desc>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">rolfel</rev.name>
        <rev.date type="dateTime">11/29/11 16:41:54</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">QC Ref.	QCCR69569 - Alert Stage is not getting updated in Change Task Details form.RAD:	us.notifyPanel:	switch.timezone.gen.textChange:	Changed expression from:	if ($L.recieverTZ~=-1) then ($L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);if null($lo.time.zone) then ($L.TZ4lo=$G.timezone) else ($L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone));date.order in $L.TZ4lo=nullsub($lo.date.order, date.order in $L.TZ4lo);set.timezone($L.TZ4lo)) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))	To:	if ($L.recieverTZ~=-1) then ($L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);if null($lo.time.zone) then ($L.TZ4lo=$G.timezone) else ($L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone));if ($L.TZ4lo~="-1") then (date.order in $L.TZ4lo=nullsub($lo.date.order, date.order in $L.TZ4lo);set.timezone($L.TZ4lo))) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</rev.desc>
        </rev.desc>
        <change.no type="decimal">69569</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">lilileil</rev.name>
        <rev.date type="dateTime">11/15/11 15:36:07</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Panel: process.msg</rev.desc>
          <rev.desc sctype="string">Don't convert subject.no to number.</rev.desc>
        </rev.desc>
        <change.no type="decimal">70324</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">falcon</rev.name>
        <rev.date type="dateTime">08/09/11 04:24:42</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Remove support for notification types 'tso', 'noticenter' and 'noticenterappr'</rev.desc>
        </rev.desc>
        <change.no type="decimal">67500</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">ZhuQinXiang</rev.name>
        <rev.date type="dateTime">05/17/11 10:18:19</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">QCCR1E59201-Have the time references in mail notifications be sent with receiver's TimeZone adjustment---&gt;Need test STR at QCCR1E56040</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">Panel: switch.timezone.gen.text , add this line as below:</rev.desc>
          <rev.desc sctype="string">date.order in $L.TZ4lo=nullsub($lo.date.order, date.order in $L.TZ4lo);</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">Form :</rev.desc>
          <rev.desc sctype="string">$L.recieverTZ=jscall("tzFunctions.getTZforNotify", $L.users)</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">if ($L.recieverTZ~=-1) then ($L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo)) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">To :</rev.desc>
          <rev.desc sctype="string">$L.recieverTZ=jscall("tzFunctions.getTZforNotify", $L.users)</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">if ($L.recieverTZ~=-1) then ($L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);date.order in $L.TZ4lo=nullsub($lo.date.order, date.order in $L.TZ4lo);set.timezone($L.TZ4lo)) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</rev.desc>
        </rev.desc>
        <change.no type="decimal">59201</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">ZhuQinXiang</rev.name>
        <rev.date type="dateTime">03/10/11 21:02:45</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">QCCR1E59201-Have the time references in mail notifications be sent with receiver's TimeZone adjustment</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">Add js "tzFunctions" function getTZforNotify(notifyName);</rev.desc>
          <rev.desc sctype="string">In the RAD " us.notify", panel "switch.timezone.gen.text":</rev.desc>
          <rev.desc sctype="string">Change the jscall as "$L.recieverTZ=jscall("tzFunctions.getTZforNotify", $L.users)".</rev.desc>
        </rev.desc>
        <change.no type="decimal">59201</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">ZhuQinXiang</rev.name>
        <rev.date type="dateTime">02/27/11 18:35:18</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">QCCR1E59201-Have the time references in mail notifications be sent with receiver's TimeZone adjustment</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">Rad: us.notify</rev.desc>
          <rev.desc sctype="string">Panel: process.msg:</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">Add these code after line($L.users=nullsub(str(3 in $L.i in message in $L.notification), ""))</rev.desc>
          <rev.desc sctype="string">$L.is.operator=false</rev.desc>
          <rev.desc sctype="string">if (index("operator()", $L.users)&gt;0) then ($L.is.operator=true)</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">Add 3 panels:</rev.desc>
          <rev.desc sctype="string">--decision--need.switch.timezone</rev.desc>
          <rev.desc sctype="string">--not null($L.format) and $L.skip.user=false and $L.is.operator=false and type($L.users)=2 and $L.class={"email", "mail"}--&gt;switch.timezone.gen.text</rev.desc>
          <rev.desc sctype="string">--gen.text</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">--process:switch.timezone.gen.text</rev.desc>
          <rev.desc sctype="string">$L.recieverTZ=jscall("tzFunctions.getTZforContact", $L.users)</rev.desc>
          <rev.desc sctype="string">if ($L.recieverTZ~=-1) then ($L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo)) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</rev.desc>
          <rev.desc sctype="string">---check.group</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">--process:gen.text</rev.desc>
          <rev.desc sctype="string">if (not null($L.format)) then ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</rev.desc>
          <rev.desc sctype="string">---check.group</rev.desc>
        </rev.desc>
        <change.no type="decimal">59201</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">ZhuQinXiang</rev.name>
        <rev.date type="dateTime">02/24/11 03:39:16</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">QCCR1E59201-Need to have the time references in mail notifications sent with the receiver's TimeZone adjustment</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">Add a judge on the RAD(us.notify) panel in(process.msg):</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">From:</rev.desc>
          <rev.desc sctype="string">if (not null($L.format)) then ($L.recieverTZ=jscall("tzFunctions.getTZforOperator", $L.users);$L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo))</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">to:</rev.desc>
          <rev.desc sctype="string">if (not null($L.format)) then if ($L.skip.user=false) then ($L.recieverTZ=jscall("tzFunctions.getTZforOperator", $L.users);$L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo)) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</rev.desc>
        </rev.desc>
        <change.no type="decimal">59201</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">pengfei</rev.name>
        <rev.date type="dateTime">02/10/11 22:24:26</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">update "start" panel</rev.desc>
          <rev.desc sctype="string">Add $L.src.url</rev.desc>
        </rev.desc>
        <change.no type="decimal">61171</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">yma2</rev.name>
        <rev.date type="dateTime">01/08/11 14:48:27</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">update panel "us.notify"</rev.desc>
          <rev.desc sctype="string">$L.text is string</rev.desc>
          <rev.desc sctype="string">denull($L.temp.text) is array</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">update  from</rev.desc>
          <rev.desc sctype="string">if (not null($L.format)) then ($L.recieverTZ=jscall("tzFunctions.getTZforOperator", $L.users);$L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo))</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">to</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">if (not null($L.format)) then ($L.recieverTZ=jscall("tzFunctions.getTZforOperator", $L.users);$L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text.array=denull($L.temp.text);$L.text=str($L.text.array);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo))</rev.desc>
        </rev.desc>
        <change.no type="decimal">60337</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">ZhuQinXiang</rev.name>
        <rev.date type="dateTime">01/01/11 05:39:28</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">QCCR1E59201-Need to have the time references in mail notifications sent with the receiver's TimeZone adjustment</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">RAD--us.notify</rev.desc>
          <rev.desc sctype="string">Panel-----process.msg</rev.desc>
          <rev.desc sctype="string">Variable--$L.text      it is populate the email body.</rev.desc>
          <rev.desc sctype="string">From:</rev.desc>
          <rev.desc sctype="string">if (not null($L.format)) then ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">To:</rev.desc>
          <rev.desc sctype="string">if (not null($L.format)) then ($L.recieverTZ=jscall("tzFunctions.getTZforOperator", $L.users);$L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo))</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">JS:</rev.desc>
          <rev.desc sctype="string">--sl--tzFunctions--add function as below:</rev.desc>
          <rev.desc sctype="string">/**</rev.desc>
          <rev.desc sctype="string">*</rev.desc>
          <rev.desc sctype="string">*@Description: Get timezone file by time zone name.</rev.desc>
          <rev.desc sctype="string">*@Author: added by Kenny</rev.desc>
          <rev.desc sctype="string">*@Date: since 11/10/10</rev.desc>
          <rev.desc sctype="string">**/</rev.desc>
          <rev.desc sctype="string">function getTZFileByTZName(tzName)</rev.desc>
          <rev.desc sctype="string">{</rev.desc>
          <rev.desc sctype="string">//print("--tzName="+tzName);</rev.desc>
          <rev.desc sctype="string">var f = new SCFile();</rev.desc>
          <rev.desc sctype="string">var q = new QueryCond("name", EQ, tzName);</rev.desc>
          <rev.desc sctype="string"/>
          <rev.desc sctype="string">if (f.doSelect("tzfile",q) == RC_SUCCESS ){</rev.desc>
          <rev.desc sctype="string">return f;</rev.desc>
          <rev.desc sctype="string">}else{</rev.desc>
          <rev.desc sctype="string">return "-1";</rev.desc>
          <rev.desc sctype="string">}</rev.desc>
          <rev.desc sctype="string">}</rev.desc>
        </rev.desc>
        <change.no type="decimal">59201</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">sanderson</rev.name>
        <rev.date type="dateTime">10/15/07 09:42:38</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Panel select.oncall</rev.desc>
          <rev.desc sctype="string">Changed the normal exit to start.onc.loop</rev.desc>
        </rev.desc>
        <change.no type="decimal">34557</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">pbudic</rev.name>
        <rev.date type="dateTime">09/01/06 05:44:02</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Performance enhancement, replaced multiple calls to lng() with a local variable.</rev.desc>
        </rev.desc>
        <change.no type="decimal">38988</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">hzhang</rev.name>
        <rev.date type="dateTime">03/16/06 09:47:20</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">remove no.group message, per Steve's request</rev.desc>
        </rev.desc>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">joeh</rev.name>
        <rev.date type="dateTime">09/26/05 06:09:22</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">us.notify, process.msg</rev.desc>
          <rev.desc sctype="string">From:	if $L.name#"CM" then ($L.target=number in $L.file; $L.mailclass=filename($L.file)+".main")</rev.desc>
          <rev.desc sctype="string">To:	if $L.name#"ChM" then ($L.target=number in $L.file; $L.mailclass=filename($L.file)+".main")</rev.desc>
        </rev.desc>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">falcon</rev.name>
        <rev.date type="dateTime">05/16/05 05:57:10</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Added $L.web.url and $L.ess.url that hold the URL that will point to the record passed in.</rev.desc>
        </rev.desc>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">pbudic</rev.name>
        <rev.date type="dateTime">11/04/04 09:49:33</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">added ability to give variable names to passed in arguements.</rev.desc>
        </rev.desc>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">cfullert</rev.name>
        <rev.date type="dateTime">09/09/04 09:29:54</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">panel:   send.oncall.msg</rev.desc>
          <rev.desc sctype="string">passed in $L.subject to the 'message name' parameter</rev.desc>
          <rev.desc sctype="string">the subject line is now correctly generated in the eventout records.</rev.desc>
        </rev.desc>
        <change.no type="decimal">32891</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">lisa</rev.name>
        <rev.date type="dateTime">08/11/03 08:21:56</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Changed set.users to use a different variable - $L.i is already used in looping through the message list.</rev.desc>
        </rev.desc>
        <change.no type="decimal">27326</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">lisa</rev.name>
        <rev.date type="dateTime">02/13/03 12:23:52</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Changed process.msg to parse out $L.users if it begins with {.  Fixed set.users to $L.users of all duplicate members within the array.</rev.desc>
        </rev.desc>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">lisa</rev.name>
        <rev.date type="dateTime">05/30/02 06:58:34</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Changed the group query ($L.users.sql) on process.msg to accept an array of group names.</rev.desc>
        </rev.desc>
        <change.no type="decimal">21565</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">pbudic</rev.name>
        <rev.date type="dateTime">03/07/02 10:58:31</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Added ability to pass $L.file.save</rev.desc>
        </rev.desc>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">lisa</rev.name>
        <rev.date type="dateTime">11/24/01 16:51:51</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Made similar changes for CM and RM notifications.</rev.desc>
        </rev.desc>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">lisa</rev.name>
        <rev.date type="dateTime">11/03/01 11:20:36</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">When sending IM notifications, "pm.main" is passed in as the mail class and the problem number is passed in as the target.</rev.desc>
        </rev.desc>
        <change.no type="decimal">16070</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">lisa</rev.name>
        <rev.date type="dateTime">11/02/01 16:57:31</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">Users can now append the record to the message text and send out email and mail with a customized subject line.</rev.desc>
        </rev.desc>
        <change.no type="decimal">15451</change.no>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">lisa</rev.name>
        <rev.date type="dateTime">09/23/01 04:20:42</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">When sending NotiCenter notifications, the record's unique key is passed in as the target.</rev.desc>
        </rev.desc>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">lisa</rev.name>
        <rev.date type="dateTime">09/30/00 09:47:55</rev.date>
        <rev.desc sctype="array"/>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
      <rev.array sctype="structure">
        <rev.name type="string">lisa</rev.name>
        <rev.date type="dateTime">09/30/00 09:31:37</rev.date>
        <rev.desc sctype="array">
          <rev.desc sctype="string">If $L.users evaluates to NULL, that message is skipped over.  That way, a msg to the operator() won't get sent by default.</rev.desc>
        </rev.desc>
        <change.no NullValue="1" type="decimal"/>
      </rev.array>
    </rev.array>
    <descript sctype="array">
      <descript sctype="string">Support attaching corporate image in the notification html email templates</descript>
      <descript sctype="string">Trim htmltemplates tag from the subject of notification mail</descript>
      <descript sctype="string">Add Group Email in process.grp.users</descript>
      <descript sctype="string">AGMRQ10H52094</descript>
      <descript sctype="string">QCCR1E152197</descript>
      <descript sctype="string">Support notification with attachment only for email but not mail</descript>
      <descript sctype="string">AGMRQ10H52094</descript>
      <descript sctype="string">QCCR1E152197</descript>
      <descript sctype="string">Support notification with attachment</descript>
      <descript sctype="string">start panel: modified "$L.void=rtecall("tagquery", $L.rc, $L.file.copy, $L.record.query, $L.tag)" to "$L.void=rtecall("tagquery", $L.rc, $L.file.copy, $L.record.query, $L.tag, false)" to improve the performance</descript>
      <descript sctype="string">QC Ref.	QCCR69569 - Alert Stage is not getting updated in Change Task Details form.RAD:	us.notifyPanel:	switch.timezone.gen.textChange:	Changed expression from:	if ($L.recieverTZ~=-1) then ($L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);if null($lo.time.zone) then ($L.TZ4lo=$G.timezone) else ($L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone));date.order in $L.TZ4lo=nullsub($lo.date.order, date.order in $L.TZ4lo);set.timezone($L.TZ4lo)) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))	To:	if ($L.recieverTZ~=-1) then ($L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);if null($lo.time.zone) then ($L.TZ4lo=$G.timezone) else ($L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone));if ($L.TZ4lo~="-1") then (date.order in $L.TZ4lo=nullsub($lo.date.order, date.order in $L.TZ4lo);set.timezone($L.TZ4lo))) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))	Panel: process.msg</descript>
      <descript sctype="string">Don't convert subject.no to number.</descript>
      <descript sctype="string">Remove support for notification types 'tso', 'noticenter' and 'noticenterappr'</descript>
      <descript sctype="string">QCCR1E59201-Have the time references in mail notifications be sent with receiver's TimeZone adjustment---&gt;Need test STR at QCCR1E56040</descript>
      <descript sctype="string"/>
      <descript sctype="string">Panel: switch.timezone.gen.text , add this line as below:</descript>
      <descript sctype="string">date.order in $L.TZ4lo=nullsub($lo.date.order, date.order in $L.TZ4lo);</descript>
      <descript sctype="string"/>
      <descript sctype="string">Form :</descript>
      <descript sctype="string">$L.recieverTZ=jscall("tzFunctions.getTZforNotify", $L.users)</descript>
      <descript sctype="string"/>
      <descript sctype="string">if ($L.recieverTZ~=-1) then ($L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo)) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</descript>
      <descript sctype="string"/>
      <descript sctype="string">To :</descript>
      <descript sctype="string">$L.recieverTZ=jscall("tzFunctions.getTZforNotify", $L.users)</descript>
      <descript sctype="string"/>
      <descript sctype="string">if ($L.recieverTZ~=-1) then ($L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);date.order in $L.TZ4lo=nullsub($lo.date.order, date.order in $L.TZ4lo);set.timezone($L.TZ4lo)) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</descript>
      <descript sctype="string">QCCR1E59201-Have the time references in mail notifications be sent with receiver's TimeZone adjustment</descript>
      <descript sctype="string"/>
      <descript sctype="string">Add js "tzFunctions" function getTZforNotify(notifyName);</descript>
      <descript sctype="string">In the RAD " us.notify", panel "switch.timezone.gen.text":</descript>
      <descript sctype="string">Change the jscall as "$L.recieverTZ=jscall("tzFunctions.getTZforNotify", $L.users)".</descript>
      <descript sctype="string">QCCR1E59201-Have the time references in mail notifications be sent with receiver's TimeZone adjustment</descript>
      <descript sctype="string"/>
      <descript sctype="string">Rad: us.notify</descript>
      <descript sctype="string">Panel: process.msg:</descript>
      <descript sctype="string"/>
      <descript sctype="string">Add these code after line($L.users=nullsub(str(3 in $L.i in message in $L.notification), ""))</descript>
      <descript sctype="string">$L.is.operator=false</descript>
      <descript sctype="string">if (index("operator()", $L.users)&gt;0) then ($L.is.operator=true)</descript>
      <descript sctype="string"/>
      <descript sctype="string">Add 3 panels:</descript>
      <descript sctype="string">--decision--need.switch.timezone</descript>
      <descript sctype="string">--not null($L.format) and $L.skip.user=false and $L.is.operator=false and type($L.users)=2 and $L.class={"email", "mail"}--&gt;switch.timezone.gen.text</descript>
      <descript sctype="string">--gen.text</descript>
      <descript sctype="string"/>
      <descript sctype="string">--process:switch.timezone.gen.text</descript>
      <descript sctype="string">$L.recieverTZ=jscall("tzFunctions.getTZforContact", $L.users)</descript>
      <descript sctype="string">if ($L.recieverTZ~=-1) then ($L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo)) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</descript>
      <descript sctype="string">---check.group</descript>
      <descript sctype="string"/>
      <descript sctype="string">--process:gen.text</descript>
      <descript sctype="string">if (not null($L.format)) then ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</descript>
      <descript sctype="string">---check.group</descript>
      <descript sctype="string">QCCR1E59201-Need to have the time references in mail notifications sent with the receiver's TimeZone adjustment</descript>
      <descript sctype="string"/>
      <descript sctype="string">Add a judge on the RAD(us.notify) panel in(process.msg):</descript>
      <descript sctype="string"/>
      <descript sctype="string">From:</descript>
      <descript sctype="string">if (not null($L.format)) then ($L.recieverTZ=jscall("tzFunctions.getTZforOperator", $L.users);$L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo))</descript>
      <descript sctype="string"/>
      <descript sctype="string">to:</descript>
      <descript sctype="string">if (not null($L.format)) then if ($L.skip.user=false) then ($L.recieverTZ=jscall("tzFunctions.getTZforOperator", $L.users);$L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo)) else ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</descript>
      <descript sctype="string">update "start" panel</descript>
      <descript sctype="string">Add $L.src.url</descript>
      <descript sctype="string">update panel "us.notify"</descript>
      <descript sctype="string">$L.text is string</descript>
      <descript sctype="string">denull($L.temp.text) is array</descript>
      <descript sctype="string"/>
      <descript sctype="string">update  from</descript>
      <descript sctype="string">if (not null($L.format)) then ($L.recieverTZ=jscall("tzFunctions.getTZforOperator", $L.users);$L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo))</descript>
      <descript sctype="string"/>
      <descript sctype="string">to</descript>
      <descript sctype="string"/>
      <descript sctype="string">if (not null($L.format)) then ($L.recieverTZ=jscall("tzFunctions.getTZforOperator", $L.users);$L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text.array=denull($L.temp.text);$L.text=str($L.text.array);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo))</descript>
      <descript sctype="string">QCCR1E59201-Need to have the time references in mail notifications sent with the receiver's TimeZone adjustment</descript>
      <descript sctype="string"/>
      <descript sctype="string">RAD--us.notify</descript>
      <descript sctype="string">Panel-----process.msg</descript>
      <descript sctype="string">Variable--$L.text      it is populate the email body.</descript>
      <descript sctype="string">From:</descript>
      <descript sctype="string">if (not null($L.format)) then ($L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text))</descript>
      <descript sctype="string"/>
      <descript sctype="string">To:</descript>
      <descript sctype="string">if (not null($L.format)) then ($L.recieverTZ=jscall("tzFunctions.getTZforOperator", $L.users);$L.TZFile4Reciever=jscall("tzFunctions.getTZFileByTZName", $L.recieverTZ);set.timezone($L.TZFile4Reciever);$L.temp.text={$L.text}+genout($L.file, $L.format);$L.text=denull($L.temp.text);$L.TZ4lo=jscall("tzFunctions.getTZFileByTZName", $lo.time.zone);set.timezone($L.TZ4lo))</descript>
      <descript sctype="string"/>
      <descript sctype="string">JS:</descript>
      <descript sctype="string">--sl--tzFunctions--add function as below:</descript>
      <descript sctype="string">/**</descript>
      <descript sctype="string">*</descript>
      <descript sctype="string">*@Description: Get timezone file by time zone name.</descript>
      <descript sctype="string">*@Author: added by Kenny</descript>
      <descript sctype="string">*@Date: since 11/10/10</descript>
      <descript sctype="string">**/</descript>
      <descript sctype="string">function getTZFileByTZName(tzName)</descript>
      <descript sctype="string">{</descript>
      <descript sctype="string">//print("--tzName="+tzName);</descript>
      <descript sctype="string">var f = new SCFile();</descript>
      <descript sctype="string">var q = new QueryCond("name", EQ, tzName);</descript>
      <descript sctype="string"/>
      <descript sctype="string">if (f.doSelect("tzfile",q) == RC_SUCCESS ){</descript>
      <descript sctype="string">return f;</descript>
      <descript sctype="string">}else{</descript>
      <descript sctype="string">return "-1";</descript>
      <descript sctype="string">}</descript>
      <descript sctype="string">}</descript>
      <descript sctype="string">Panel select.oncall</descript>
      <descript sctype="string">Changed the normal exit to start.onc.loop</descript>
      <descript sctype="string">Performance enhancement, replaced multiple calls to lng() with a local variable.</descript>
      <descript sctype="string">remove no.group message, per Steve's request</descript>
      <descript sctype="string">us.notify, process.msg</descript>
      <descript sctype="string">From:	if $L.name#"CM" then ($L.target=number in $L.file; $L.mailclass=filename($L.file)+".main")</descript>
      <descript sctype="string">To:	if $L.name#"ChM" then ($L.target=number in $L.file; $L.mailclass=filename($L.file)+".main")</descript>
      <descript sctype="string">Added $L.web.url and $L.ess.url that hold the URL that will point to the record passed in.</descript>
      <descript sctype="string">added ability to give variable names to passed in arguements.</descript>
      <descript sctype="string">panel:   send.oncall.msg</descript>
      <descript sctype="string">passed in $L.subject to the 'message name' parameter</descript>
      <descript sctype="string">the subject line is now correctly generated in the eventout records.</descript>
      <descript sctype="string">Changed set.users to use a different variable - $L.i is already used in looping through the message list.</descript>
      <descript sctype="string">Changed process.msg to parse out $L.users if it begins with {.  Fixed set.users to $L.users of all duplicate members within the array.</descript>
      <descript sctype="string">Changed the group query ($L.users.sql) on process.msg to accept an array of group names.</descript>
      <descript sctype="string">Added ability to pass $L.file.save</descript>
      <descript sctype="string">Made similar changes for CM and RM notifications.</descript>
      <descript sctype="string">When sending IM notifications, "pm.main" is passed in as the mail class and the problem number is passed in as the target.</descript>
      <descript sctype="string">Users can now append the record to the message text and send out email and mail with a customized subject line.</descript>
      <descript sctype="string">Now passes in the record's unique key as the target.</descript>
      <descript sctype="string">Nullsub'd evaluate(parse($L.users, 2)) to "nouser" so that even if the expression evaluates to NULL, a msg to the operator() won't get sent by default.</descript>
    </descript>
    <release type="string">A9902</release>
    <sysmodcount type="decimal">5</sysmodcount>
    <sysmoduser type="string">zhouanqing</sysmoduser>
    <sysmodtime type="dateTime">09/11/19 21:21:55</sysmodtime>
  </record>
</recordset>
