<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<recordset table="displaycache">
  <record id="language=&quot;ENG&quot; and screen.id=&quot;kmsearchserverSOLR.view&quot;" recordid="ENG - kmsearchserverSOLR.view">
    <unl>kC0Xa21zZWFyY2hzZXJ2ZXJTT0xSLnZpZXcvHy8vL5AtF2ttc2VhcmNoc2Vy
dmVyU09MUi52aWV3K0VOR90IJEwudGl0bGXdCSRMLmZvcm1hdEE/kICBTy+R
LQZyZXR1cm6QTy8vLGxlZnQfH5EtF2ttc2VhcmNoc2VydmVyU09MUi52aWV3
T0EZDS0GZmFsY29uPQhBz4YnSgIiIk8vT5FPgBESExQVGQoZCxoBLBoBLRoB
LhoBLxoD54GALRVTZWFyY2g7RG9uZSBTZWFyY2hpbmcrQWRkLRNCYWNrO0Rv
bmUgU2VhcmNoaW5nLFNhdmUtBkRlbGV0ZSxOZXh0LQhQcmV2aW91cy0NVmVy
aWZ5IFNlcnZlci0KQWRkIFNlcnZlci0NRGVsZXRlIFNlcnZlci0MU2V0IFNl
YXJjaGVyLRImQ2xvc2UgQXBwbGljYXRpb26BgKkI3QckTC5tb2RlLQZzZWFy
Y2igqQjdByRMLm1vZGUtBnNlYXJjaKBBqQndByRMLm1vZGUtBnNlYXJjaKCp
Cd0HJEwubW9kZS0Gc2VhcmNooN0HJEwubXVsdN0HJEwubXVsdEFBQUFBgYCA
LQZzZWFyY2iBgCthZGSBgCxiYWNrgYAsc2F2ZYGALQZkZWxldGWBgCxuZXh0
gYAtCHByZXZpb3VzgYAtDXZlcmlmeV9zZXJ2ZXKBgCxzYXZlgYAtDWRlbGV0
ZV9zZXJ2ZXKBgC0Mc2V0X3NlYXJjaGVygYAtBWNsb3NlgYGAgYCBgIGAgEGB
gEGBgEGBgEGBgEGBgEGBgEGBgEGBgEGBgEGBgEGBgEGBgStFTkcRLQZmYWxj
b249CEHPr5f+GZmagEBAQEBAQEBAQEBAgYAPDw8PDw8PDy4QLHZhciBva3Rv
YWRkID0gdHJ1ZTsKdmFyIHByaW1hcnlzZWFyY2hlciA9IGZhbHNlOwppZiAo
dmFycy4kTF9rbWhvc3RuYW1lID09IG51bGwpCglva3RvYWRkID0gZmFsc2U7
CmlmICh2YXJzLiRMX2ttcG9ydCA9PSBudWxsKQoJb2t0b2FkZCA9IGZhbHNl
OwppZiAodmFycy4kTF9rbXNlcnZlcnR5cGUgPT0gbnVsbCkKCW9rdG9hZGQg
PSBmYWxzZTsKCQppZih2YXJzLiRHX2ttX2dsb2JhbGVudlsnc3NsLmVuYWJs
ZWQnXSAmJiAhdmFycy4kTF9odHRwc19wb3J0KSB7Cglva3RvYWRkID0gZmFs
c2U7Cgl2YXIgc3RyID0gc3lzdGVtLmZ1bmN0aW9ucy5zY21zZyggOTk5OTMs
ICJrbSIpOwoJc3lzdGVtLmZ1bmN0aW9ucy5ydGVjYWxsKCJtc2ciLCIiLHN0
ciwgMyk7IAp9CgkKaWYgKCFva3RvYWRkKQp7Cgl2YXIgYXJyYXlBcmdzID0g
bmV3IFNDRGF0dW0oKTsKICAgIGFycmF5QXJncy5zZXRUeXBlKDgpOyAgLy90
eXBlIGFycmF5CiAgICBzeXN0ZW0ubGlicmFyeS5LTVV0aWxzLmRvbWVzc2Fn
ZUJveChzeXN0ZW0uZnVuY3Rpb25zLnNjbXNnKDIyMCwgImttIiwgYXJyYXlB
cmdzKSk7CglyZXR1cm47Cn0KCmlmIChva3RvYWRkICYmIHZhcnMuJExfa21z
ZXJ2ZXJ0eXBlID09Im1hc3RlciIpCnsKCS8vIGNoZWNrIHRvIHNlZSBpZiB3
ZSBhbHJlYWR5IGhhdmUgYW4gaW5kZXhlcgoJZm9yICh2YXIgeSA9IDA7IHkg
PHZhcnMuJExfZmlsZS5zZXJ2ZXJzLmxlbmd0aCgpOyB5KyspCgkJaWYgKHZh
cnMuJExfZmlsZS5zZXJ2ZXJzW3ldLnNlcnZlcnR5cGUgPT0gIm1hc3RlciIp
CgkJCW9rdG9hZGQgPSBmYWxzZTsKfQoJCmlmICghb2t0b2FkZCAmJiB2YXJz
LiRMX2ttc2VydmVydHlwZSA9PSAibWFzdGVyIikKewoJdmFyIGFycmF5QXJn
cyA9IG5ldyBTQ0RhdHVtKCk7CiAgICBhcnJheUFyZ3Muc2V0VHlwZSg4KTsg
IC8vdHlwZSBhcnJheQogICAgc3lzdGVtLmxpYnJhcnkuS01VdGlscy5kb21l
c3NhZ2VCb3goc3lzdGVtLmZ1bmN0aW9ucy5zY21zZygyMzYsICJrbSIsIGFy
cmF5QXJncykpOwoJCn0KCmlmIChva3RvYWRkICYmIHZhcnMuJExfa21zZXJ2
ZXJ0eXBlID09ICJtYXN0ZXIiKQp7CgkvL2NoZWNrIHRvIHNlZSBpZiB3ZSBo
YXZlIGEgcHJpbWFyeSBzZWFyY2hlciBhbHJlYWR5CglwcmltYXJ5c2VhcmNo
ZXIgPSB0cnVlOwoJZm9yICh2YXIgeSA9IDA7IHkgPHZhcnMuJExfZmlsZS5z
ZXJ2ZXJzLmxlbmd0aCgpOyB5KyspCgkJaWYgKHZhcnMuJExfZmlsZS5zZXJ2
ZXJzW3ldLnByaW1hcnlzZWFyY2hlcikKCQkJcHJpbWFyeXNlYXJjaGVyID0g
ZmFsc2U7Ci8vc2V0IGNvbGxlY3Rpb25zIHRvIHRoaXMgc2VydmVyIQogICAJ
dmFyIGNvbGxlY3Rpb25GaWxlID0gbmV3IFNDRmlsZSgia21rbm93bGVkZ2Vi
YXNlIik7CiAgIAl2YXIgY29sbEZpbmQgPSBjb2xsZWN0aW9uRmlsZS5kb1Nl
bGVjdCgidHJ1ZSIpOwogICAJdmFyIGZpcnN0QWRkID0gZmFsc2U7CiAgIAlp
ZiAoY29sbEZpbmQgPT0gUkNfU1VDQ0VTUykKICAgCXsKCQljb2xsRmluZCA9
IGNvbGxlY3Rpb25GaWxlLmdldEZpcnN0KCk7CgkgIAl3aGlsZSAoY29sbEZp
bmQgPT0gUkNfU1VDQ0VTUykKCSAgCXsKCQkJaWYgKGNvbGxlY3Rpb25GaWxl
LnNlYXJjaHNlcnZlcm5hbWUgPT0gbnVsbCB8fCBjb2xsZWN0aW9uRmlsZS5z
ZWFyY2hzZXJ2ZXJuYW1lLmxlbmd0aCA9PSAwKQoJCQl7CgkJCQljb2xsZWN0
aW9uRmlsZS5zZWFyY2hzZXJ2ZXJuYW1lID0gdmFycy4kTF9maWxlLnNlcnZl
cm5hbWU7CgkJCQljb2xsZWN0aW9uRmlsZS5kb1VwZGF0ZSgpOwoJCQkJZmly
c3RBZGQgPSB0cnVlOwoJCQl9CQoJCQljb2xsRmluZCA9IGNvbGxlY3Rpb25G
aWxlLmdldE5leHQoKTsKCQl9Cgl9CgkKCWlmIChmaXJzdEFkZCkKCXsKCSAg
ICAgICAgdmFyIGFycmF5QXJncyA9IG5ldyBTQ0RhdHVtKCk7CiAgICAgICAg
ICAgIGFycmF5QXJncy5zZXRUeXBlKDgpOyAgLy90eXBlIGFycmF5Ci8vICAg
ICAgICAgICAgcHJpbnQoc3lzdGVtLmZ1bmN0aW9ucy5zY21zZygyMTcsICJr
bSIsIGFycmF5QXJncykpOwogICAgICAgICAgICBzeXN0ZW0ubGlicmFyeS5L
TVV0aWxzLmRvbWVzc2FnZUJveChzeXN0ZW0uZnVuY3Rpb25zLnNjbXNnKDIx
NywgImttIiwgYXJyYXlBcmdzKSk7CgkKCX0KCWVsc2UKCXsKCSAgICAgICAg
dmFyIGFycmF5QXJncyA9IG5ldyBTQ0RhdHVtKCk7CiAgICAgICAgICAgIGFy
cmF5QXJncy5zZXRUeXBlKDgpOyAgLy90eXBlIGFycmF5CiAgICAgICAgICAg
IC8vcHJpbnQoc3lzdGVtLmZ1bmN0aW9ucy5zY21zZygyMTgsICJrbSIsIGFy
cmF5QXJncykpOyAJCgkJCXN5c3RlbS5saWJyYXJ5LktNVXRpbHMuZG9tZXNz
YWdlQm94KHN5c3RlbS5mdW5jdGlvbnMuc2Ntc2coMjE4LCAia20iLCBhcnJh
eUFyZ3MpKTsgCgl9CgkJCQp9CmlmIChva3RvYWRkICYmIHZhcnMuJExfa21z
ZXJ2ZXJ0eXBlID09ICJzbGF2ZSIpCnsKCXZhciBpbmRleGVyRm91bmQgPSBm
YWxzZTsKCS8vbmVlZCB0byBjaGVjayBpZiBJIHNob3VsZCBjcmVhdGUgc2xh
dmUgY29sbGVjdGlvbiBvciBub3QuLi4KCS8vY2hlY2sgaWYgd2UgaGF2ZSBh
biBpbmRleGVyIGZpcnN0Cglmb3IgKHZhciB5ID0gMDsgeSA8dmFycy4kTF9m
aWxlLnNlcnZlcnMubGVuZ3RoKCk7IHkrKykKCQlpZiAodmFycy4kTF9maWxl
LnNlcnZlcnNbeV0uc2VydmVydHlwZSA9PSAibWFzdGVyIikKCQkJaW5kZXhl
ckZvdW5kID0gdHJ1ZTsKCWlmICghaW5kZXhlckZvdW5kKQoJewoJCXZhciBh
cnJheUFyZ3MgPSBuZXcgU0NEYXR1bSgpOwogICAgCWFycmF5QXJncy5zZXRU
eXBlKDgpOyAgLy90eXBlIGFycmF5CiAgICAJc3lzdGVtLmxpYnJhcnkuS01V
dGlscy5kb21lc3NhZ2VCb3goc3lzdGVtLmZ1bmN0aW9ucy5zY21zZygyMzcs
ICJrbSIsIGFycmF5QXJncykpOwoJCW9rdG9hZGQgPSBmYWxzZTsKCX0KfQpp
ZiAob2t0b2FkZCAmJiB2YXJzLiRMX2ttc2VydmVydHlwZSA9PSAibG9hZGJh
bGFuY2VyIikKewoJdmFyIGluZGV4ZXJGb3VuZCA9IGZhbHNlOwoJLy9uZWVk
IHRvIGNoZWNrIGlmIEkgc2hvdWxkIGNyZWF0ZSBzbGF2ZSBjb2xsZWN0aW9u
IG9yIG5vdC4uLgoJLy9jaGVjayBpZiB3ZSBoYXZlIGFuIGluZGV4ZXIgZmly
c3QKCWZvciAodmFyIHkgPSAwOyB5IDx2YXJzLiRMX2ZpbGUuc2VydmVycy5s
ZW5ndGgoKTsgeSsrKQoJCWlmICh2YXJzLiRMX2ZpbGUuc2VydmVyc1t5XS5z
ZXJ2ZXJ0eXBlID09ICJtYXN0ZXIiKQoJCQlpbmRleGVyRm91bmQgPSB0cnVl
OwoJaWYgKCFpbmRleGVyRm91bmQpCgl7CgkJdmFyIGFycmF5QXJncyA9IG5l
dyBTQ0RhdHVtKCk7CiAgICAJYXJyYXlBcmdzLnNldFR5cGUoOCk7ICAvL3R5
cGUgYXJyYXkKICAgIAlzeXN0ZW0ubGlicmFyeS5LTVV0aWxzLmRvbWVzc2Fn
ZUJveChzeXN0ZW0uZnVuY3Rpb25zLnNjbXNnKDIzNywgImttIiwgYXJyYXlB
cmdzKSk7CgkJb2t0b2FkZCA9IGZhbHNlOwoJfQp9CgppZiAob2t0b2FkZCkK
ewoJdmFyIHNlcnZlciA9IG5ldyBTQ0RhdHVtKCk7CglzZXJ2ZXIuc2V0VHlw
ZSg5KTsKCXNlcnZlci5wdXNoKHByaW1hcnlzZWFyY2hlcik7CglzZXJ2ZXIu
cHVzaCh2YXJzLiRMX2ttaG9zdG5hbWUpOwoJc2VydmVyLnB1c2godmFycy4k
TF9rbXBvcnQpOwoJc2VydmVyLnB1c2godmFycy4kTF9rbXNlcnZlcnR5cGUp
OwoJc2VydmVyLnB1c2godmFycy4kTF9odHRwc19wb3J0KTsKCXByaW50KCJz
ZXJ2ZXJzLmxlbmd0aDogIit2YXJzLiRMX2ZpbGUuc2VydmVycy5sZW5ndGgo
KSk7CglpZiAodmFycy4kTF9maWxlLnNlcnZlcnMubGVuZ3RoKCkgPT0gMSkK
CXsKCQlpZiAodmFycy4kTF9maWxlLnNlcnZlcnNbMF0uc2VydmVydHlwZSA9
PSBudWxsKQoJCQl2YXJzLiRMX2ZpbGUuc2VydmVycy5wb3AoKTsKCX0KCQkK
CWlmICh2YXJzLiRMX2ZpbGUuc2VydmVycy5sZW5ndGgoKSA9PSAwKQoJewoJ
CXZhcnMuJExfZmlsZS5zZXJ2ZXJzLnBvcCgpOwoJCXZhcnMuJExfZmlsZS5z
ZXJ2ZXJzLnB1c2goc2VydmVyKTsKCX0KCWVsc2UKCQl2YXJzLiRMX2ZpbGUu
c2VydmVycy5wdXNoKHNlcnZlcik7CgkvL2NsZWFyIGxvY2FsIHZhcmlhYmxl
cwkKCXZhcnMuJExfa21ob3N0bmFtZSA9ICIiOwoJdmFycy4kTF9rbXBvcnQg
PSAiIjsKCXZhcnMuJExfa21zZXJ2ZXJ0eXBlID0gIiI7Cgl2YXJzLiRMX2h0
dHBzX3BvcnQ9Jyc7Cn0KdmFycy4kTF9hY3Rpb249InNhdmUiO4GAgZE=</unl>
    <screen.id type="string">kmsearchserverSOLR.view</screen.id>
    <form NullValue="1" type="string"/>
    <txt.bank NullValue="1" type="decimal"/>
    <cursor.field.name NullValue="1" type="string"/>
    <cursor.field.contents NullValue="1" type="string"/>
    <current.scroll NullValue="1" type="string"/>
    <screen type="structure">{["kmsearchserverSOLR.view", "ENG", $L.title, $L.format, true, , {[{}, , ]}, "return", {[, , , "left", , ]}, "kmsearchserverSOLR.view", , true, 13, "falcon", '02/16/11 00:16:01', , , ]}</screen>
    <more.flag NullValue="1" type="boolean"/>
    <ds.opt sctype="array">
      <ds.opt sctype="decimal">1</ds.opt>
      <ds.opt sctype="decimal">2</ds.opt>
      <ds.opt sctype="decimal">3</ds.opt>
      <ds.opt sctype="decimal">4</ds.opt>
      <ds.opt sctype="decimal">5</ds.opt>
      <ds.opt sctype="decimal">10</ds.opt>
      <ds.opt sctype="decimal">11</ds.opt>
      <ds.opt sctype="decimal">300</ds.opt>
      <ds.opt sctype="decimal">301</ds.opt>
      <ds.opt sctype="decimal">302</ds.opt>
      <ds.opt sctype="decimal">303</ds.opt>
      <ds.opt sctype="decimal">999</ds.opt>
    </ds.opt>
    <ds.desc sctype="array">
      <ds.desc sctype="string">Search;Done Searching</ds.desc>
      <ds.desc sctype="string">Add</ds.desc>
      <ds.desc sctype="string">Back;Done Searching</ds.desc>
      <ds.desc sctype="string">Save</ds.desc>
      <ds.desc sctype="string">Delete</ds.desc>
      <ds.desc sctype="string">Next</ds.desc>
      <ds.desc sctype="string">Previous</ds.desc>
      <ds.desc sctype="string">Verify Server</ds.desc>
      <ds.desc sctype="string">Add Server</ds.desc>
      <ds.desc sctype="string">Delete Server</ds.desc>
      <ds.desc sctype="string">Set Searcher</ds.desc>
      <ds.desc sctype="string">&amp;Close Application</ds.desc>
    </ds.desc>
    <ds.cond sctype="array">
      <ds.cond sctype="operator">$L.mode="search"</ds.cond>
      <ds.cond sctype="operator">$L.mode="search"</ds.cond>
      <ds.cond sctype="boolean">true</ds.cond>
      <ds.cond sctype="operator">$L.mode~="search"</ds.cond>
      <ds.cond sctype="operator">$L.mode~="search"</ds.cond>
      <ds.cond sctype="globalVar">$L.mult</ds.cond>
      <ds.cond sctype="globalVar">$L.mult</ds.cond>
      <ds.cond sctype="boolean">true</ds.cond>
      <ds.cond sctype="boolean">true</ds.cond>
      <ds.cond sctype="boolean">true</ds.cond>
      <ds.cond sctype="boolean">true</ds.cond>
      <ds.cond sctype="boolean">true</ds.cond>
    </ds.cond>
    <ds.actions sctype="array">
      <ds.actions sctype="array">
        <ds.actions sctype="string">search</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">add</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">back</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">save</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">delete</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">next</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">previous</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">verify_server</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">save</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">delete_server</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">set_searcher</ds.actions>
      </ds.actions>
      <ds.actions sctype="array">
        <ds.actions sctype="string">close</ds.actions>
      </ds.actions>
    </ds.actions>
    <ds.exps NullValue="1" sctype="array">
      <ds.exps NullValue="1" type="expression"/>
    </ds.exps>
    <ds.rads NullValue="1" sctype="array">
      <ds.rads sctype="structure">
        <application NullValue="1" type="string"/>
        <thread NullValue="1" type="boolean"/>
        <parms NullValue="1" sctype="array">
          <parms NullValue="1" type="string"/>
        </parms>
        <values NullValue="1" sctype="array">
          <values NullValue="1" type="string"/>
        </values>
      </ds.rads>
    </ds.rads>
    <ds.exps.1 NullValue="1" sctype="array">
      <ds.exps.1 NullValue="1" type="expression"/>
    </ds.exps.1>
    <ds.a.options sctype="array">
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
      <ds.a.options sctype="array">
        <ds.a.options sctype="boolean">true</ds.a.options>
      </ds.a.options>
    </ds.a.options>
    <language type="string">ENG</language>
    <sysmodcount type="decimal">1</sysmodcount>
    <sysmoduser type="string">falcon</sysmoduser>
    <sysmodtime type="dateTime">06/15/21 00:52:12</sysmodtime>
    <ds.mod sctype="array">
      <ds.mod sctype="boolean">false</ds.mod>
      <ds.mod sctype="boolean">false</ds.mod>
      <ds.mod sctype="boolean">false</ds.mod>
      <ds.mod sctype="boolean">false</ds.mod>
      <ds.mod sctype="boolean">false</ds.mod>
      <ds.mod sctype="boolean">false</ds.mod>
      <ds.mod sctype="boolean">false</ds.mod>
      <ds.mod sctype="boolean">false</ds.mod>
      <ds.mod sctype="boolean">false</ds.mod>
      <ds.mod sctype="boolean">false</ds.mod>
      <ds.mod sctype="boolean">false</ds.mod>
    </ds.mod>
    <ds.javascript.pre sctype="array">
      <ds.javascript.pre sctype="unknown"/>
      <ds.javascript.pre sctype="unknown"/>
      <ds.javascript.pre sctype="unknown"/>
      <ds.javascript.pre sctype="unknown"/>
      <ds.javascript.pre sctype="unknown"/>
      <ds.javascript.pre sctype="unknown"/>
      <ds.javascript.pre sctype="unknown"/>
      <ds.javascript.pre sctype="unknown"/>
      <ds.javascript.pre sctype="string">var oktoadd = true;
var primarysearcher = false;
if (vars.$L_kmhostname == null)
	oktoadd = false;
if (vars.$L_kmport == null)
	oktoadd = false;
if (vars.$L_kmservertype == null)
	oktoadd = false;
	
if(vars.$G_km_globalenv['ssl.enabled'] &amp;&amp; !vars.$L_https_port) {
	oktoadd = false;
	var str = system.functions.scmsg( 99993, "km");
	system.functions.rtecall("msg","",str, 3); 
}
	
if (!oktoadd)
{
	var arrayArgs = new SCDatum();
    arrayArgs.setType(8);  //type array
    system.library.KMUtils.domessageBox(system.functions.scmsg(220, "km", arrayArgs));
	return;
}

if (oktoadd &amp;&amp; vars.$L_kmservertype =="master")
{
	// check to see if we already have an indexer
	for (var y = 0; y &lt;vars.$L_file.servers.length(); y++)
		if (vars.$L_file.servers[y].servertype == "master")
			oktoadd = false;
}
	
if (!oktoadd &amp;&amp; vars.$L_kmservertype == "master")
{
	var arrayArgs = new SCDatum();
    arrayArgs.setType(8);  //type array
    system.library.KMUtils.domessageBox(system.functions.scmsg(236, "km", arrayArgs));
	
}

if (oktoadd &amp;&amp; vars.$L_kmservertype == "master")
{
	//check to see if we have a primary searcher already
	primarysearcher = true;
	for (var y = 0; y &lt;vars.$L_file.servers.length(); y++)
		if (vars.$L_file.servers[y].primarysearcher)
			primarysearcher = false;
//set collections to this server!
   	var collectionFile = new SCFile("kmknowledgebase");
   	var collFind = collectionFile.doSelect("true");
   	var firstAdd = false;
   	if (collFind == RC_SUCCESS)
   	{
		collFind = collectionFile.getFirst();
	  	while (collFind == RC_SUCCESS)
	  	{
			if (collectionFile.searchservername == null || collectionFile.searchservername.length == 0)
			{
				collectionFile.searchservername = vars.$L_file.servername;
				collectionFile.doUpdate();
				firstAdd = true;
			}	
			collFind = collectionFile.getNext();
		}
	}
	
	if (firstAdd)
	{
	        var arrayArgs = new SCDatum();
            arrayArgs.setType(8);  //type array
//            print(system.functions.scmsg(217, "km", arrayArgs));
            system.library.KMUtils.domessageBox(system.functions.scmsg(217, "km", arrayArgs));
	
	}
	else
	{
	        var arrayArgs = new SCDatum();
            arrayArgs.setType(8);  //type array
            //print(system.functions.scmsg(218, "km", arrayArgs)); 	
			system.library.KMUtils.domessageBox(system.functions.scmsg(218, "km", arrayArgs)); 
	}
			
}
if (oktoadd &amp;&amp; vars.$L_kmservertype == "slave")
{
	var indexerFound = false;
	//need to check if I should create slave collection or not...
	//check if we have an indexer first
	for (var y = 0; y &lt;vars.$L_file.servers.length(); y++)
		if (vars.$L_file.servers[y].servertype == "master")
			indexerFound = true;
	if (!indexerFound)
	{
		var arrayArgs = new SCDatum();
    	arrayArgs.setType(8);  //type array
    	system.library.KMUtils.domessageBox(system.functions.scmsg(237, "km", arrayArgs));
		oktoadd = false;
	}
}
if (oktoadd &amp;&amp; vars.$L_kmservertype == "loadbalancer")
{
	var indexerFound = false;
	//need to check if I should create slave collection or not...
	//check if we have an indexer first
	for (var y = 0; y &lt;vars.$L_file.servers.length(); y++)
		if (vars.$L_file.servers[y].servertype == "master")
			indexerFound = true;
	if (!indexerFound)
	{
		var arrayArgs = new SCDatum();
    	arrayArgs.setType(8);  //type array
    	system.library.KMUtils.domessageBox(system.functions.scmsg(237, "km", arrayArgs));
		oktoadd = false;
	}
}

if (oktoadd)
{
	var server = new SCDatum();
	server.setType(9);
	server.push(primarysearcher);
	server.push(vars.$L_kmhostname);
	server.push(vars.$L_kmport);
	server.push(vars.$L_kmservertype);
	server.push(vars.$L_https_port);
	print("servers.length: "+vars.$L_file.servers.length());
	if (vars.$L_file.servers.length() == 1)
	{
		if (vars.$L_file.servers[0].servertype == null)
			vars.$L_file.servers.pop();
	}
		
	if (vars.$L_file.servers.length() == 0)
	{
		vars.$L_file.servers.pop();
		vars.$L_file.servers.push(server);
	}
	else
		vars.$L_file.servers.push(server);
	//clear local variables	
	vars.$L_kmhostname = "";
	vars.$L_kmport = "";
	vars.$L_kmservertype = "";
	vars.$L_https_port='';
}
vars.$L_action="save";</ds.javascript.pre>
    </ds.javascript.pre>
    <ds.javascript.post NullValue="1" sctype="array">
      <ds.javascript.post NullValue="1" type="string"/>
    </ds.javascript.post>
  </record>
</recordset>
