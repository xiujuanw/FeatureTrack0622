<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<recordset table="triggers">
  <record id="trigger.name=&quot;sdchatbot.post.add&quot;" recordid="sdchatbot.post.add">
    <trigger.name type="string">sdchatbot.post.add</trigger.name>
    <trigger.type type="decimal">2</trigger.type>
    <table.name type="string">sdchatbot</table.name>
    <application.name NullValue="1" type="string"/>
    <sysmodcount type="decimal">6</sysmodcount>
    <sysmoduser type="string">hanrui</sysmoduser>
    <sysmodtime type="dateTime">08/17/16 18:36:13</sysmodtime>
    <javascript type="string">var botAiml=new SCFile("sdchatbotaiml");
var sql="bot.id=\""+record['number']+"\"";
if(botAiml.doSelect(sql)!==RC_SUCCESS){
    botAiml['bot.id']=record['number'];
    lib.EndUserChatBotAiml.initAimlForBot(botAiml);
    botAiml.doInsert();
}
if(record['default.bot']){
    sql="number~=\""+record['number']+"\"";
    var bot=new SCFile("sdchatbot");
    if(bot.doSelect(sql)===RC_SUCCESS){
        do{
            bot['default.bot']=false;
            bot.doUpdate();
        }while (bot.getNext()===RC_SUCCESS)
    }
}</javascript>
  </record>
</recordset>
