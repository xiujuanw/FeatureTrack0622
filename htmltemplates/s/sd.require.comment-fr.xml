<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<recordset table="htmltemplates">
  <record id="name=&quot;sd.require.comment&quot; and language=&quot;fr&quot;" recordid="sd.require.comment - fr">
    <id type="string">1565</id>
    <type NullValue="1" type="string"/>
    <name type="string">sd.require.comment</name>
    <expression type="string">//Prepare url for web access
//#################################################################################################################
//This is the url for index.do. if you want to generate url for ess.do, please use getESSURLFromQuery instead
var file_name = system.functions.filename($RECORD);
var record_name = system.functions.scmsg(lib.dbdictHelper.getPrimaryTablename(file_name),"tablename");
var record_title = record_name+" "+$RECORD.incident_id;
var record_query = "incident.id=\""+$RECORD.incident_id+"\"";
//var web_url = lib.urlCreator.getURLFromQuery(file_name,record_query,record_title);
//var web_url = lib.urlCreator.getESSURLFromQuery(file_name,record_query,record_title);
var http_url = lib.urlCreator.getRelativeURL();
//#################################################################################################################

var web_url = lib.streamlined_sd_utilities.getESSWebURL($RECORD.incident_id);
var $ = lib.c.$;

// get new activity
var activities_old = system.functions.denull($RECORDOLD.update_action);
var activities = system.functions.denull($RECORD.update_action);
var activity_num = activities.length() - activities_old.length();
var activity = [];
if (activity_num === 0) {
  _activities = $("activityservicemgt", SCFILE_READONLY).setFields(["description"]).select('number="' + $RECORD.incident_id + '" and cust.visible=true').setOrderBy(["datestamp"], [SCFILE_DSC]).uniqueResult();
  if (_activities) {
    for (var i=0; i&lt;_activities.description.length(); i++) {
      activity.push(_activities.description[i]);
    }
  }
}
else {
  for (var i=1; i&lt;activity_num; i++) {
    activity.push(activities[i]);
  }
}

// parameters for email actions
var localscmsg = lib.NotificationRecipientsHelp.determinMsg;

var comment_action_label = localscmsg(null,"SmartEmail","comment_action_label");
var resolve_action_label = localscmsg(null,"SmartEmail","resolve_action_label");

//#################################################################################################################
//Localize local module status value
var _open = $RECORD.open;
var open = lib.htmlemailtemplates.getLocalStatusValue($RECORD, _open);
var display= lib.MailUtil.isRequestDetailSectionDisplay();</expression>
    <content NullValue="1" sctype="array">
      <content NullValue="1" type="string"/>
    </content>
    <module type="string">incidents</module>
    <cap.exec NullValue="1" sctype="array">
      <cap.exec NullValue="1" type="string"/>
    </cap.exec>
    <active type="boolean">true</active>
    <htmlcode type="string">&lt;table style="FONT-SIZE: 11pt; FONT-FAMILY: Metric Regular, arial; WIDTH: 98%"&gt;
	&lt;tbody&gt;
		&lt;tr&gt;
			&lt;td align="left" valign="top"&gt;
				&lt;table style="FONT-FAMILY: Metric Regular, arial; WIDTH: 640px"&gt;
					&lt;tbody&gt;
						&lt;tr&gt;
							&lt;td valign="top"&gt;
								&lt;table cellpadding="10" cellspacing="10" style="HEIGHT: 267px; FONT-FAMILY: Metric Regular, arial; WIDTH: 520px" width="560"&gt;
									&lt;tbody&gt;
										&lt;tr&gt;
											&lt;td align="left" style="WIDTH: 100%" valign="top"&gt;
												&lt;h1 style="FONT-SIZE: 18pt; COLOR: rgb(94,94,94)"&gt;&lt;img alt="Logo" src="{http_url}/images/Icon_Logo.png"/&gt;Service Manager&lt;/h1&gt;
												&lt;table border="0" cellpadding="0" cellspacing="0" width="100%"&gt;
													&lt;tbody&gt;
														&lt;tr&gt;
															&lt;td colspan="2" height="2" style="BACKGROUND-COLOR: rgb(203,239,229)"&gt;
																&amp;nbsp;&lt;/td&gt;
														&lt;/tr&gt;
														&lt;tr&gt;
															&lt;td style="FONT-SIZE: 12pt; BACKGROUND-COLOR: rgb(203,239,229)"&gt;Votre demande &lt;a href="{web_url}" style="FONT-FAMILY: Metric Regular, arial; COLOR: #0082be" target="_blank"&gt;{$RECORD.incident_id}&lt;/a&gt; a été mise à jour par un agent IT avec le message suivant :&lt;/td&gt;
														&lt;/tr&gt;
														&lt;tr&gt;
															&lt;td colspan="2" height="2" style="BACKGROUND-COLOR: rgb(203,239,229)"&gt;
																&amp;nbsp;&lt;/td&gt;
														&lt;/tr&gt;
														&lt;tr&gt;
															&lt;td style="FONT-SIZE: 11pt; BACKGROUND-COLOR: rgb(203,239,229)"&gt;&lt;em&gt;{activity}&lt;/em&gt;&lt;/td&gt;
														&lt;/tr&gt;
														&lt;tr&gt;
															&lt;td colspan="2" height="2" style="BACKGROUND-COLOR: rgb(203,239,229)"&gt;
																&amp;nbsp;&lt;/td&gt;
														&lt;/tr&gt;
														&lt;tr&gt;
															&lt;td style="FONT-SIZE: 12pt; BACKGROUND-COLOR: rgb(203,239,229)"&gt;Cliquez sur &amp;quot;{comment_action_label}&amp;quot; ou sur &amp;quot;{resolve_action_label}&amp;quot; pour répondre à l'agent IT.&lt;/td&gt;
														&lt;/tr&gt;
														&lt;tr&gt;
															&lt;td colspan="2" height="2" style="BACKGROUND-COLOR: rgb(203,239,229)"&gt;
																&amp;nbsp;&lt;/td&gt;
														&lt;/tr&gt;
													&lt;/tbody&gt;
												&lt;/table&gt;
											&lt;/td&gt;
										&lt;/tr&gt;
										&lt;tr&gt;
											&lt;td align="left" style="WIDTH: 100%" valign="top"&gt;
												&lt;div style="POSITION: relative; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN-TOP: -24px; PADDING-RIGHT: 0px"&gt;
													&lt;h2 style="FONT-SIZE: 14pt; FONT-FAMILY: Metric Semibold, Arial Narrow Bold; COLOR: rgb(94,94,94)"&gt;Détails de la demande&lt;/h2&gt;
													&lt;table align="center" cellpadding="6" cellspacing="2" style="FONT-SIZE: 11pt; FONT-FAMILY: Metric Regular, arial;" width="94%"&gt;
														&lt;tbody&gt;
															&lt;tr style="display:{display} !important; display:{display};"&gt;
																&lt;td style="COLOR: rgb(88,88,88)" width="22%"&gt;État&lt;/td&gt;
																&lt;td&gt;{open}&lt;/td&gt;
															&lt;/tr&gt;
															&lt;tr&gt;
																&lt;td style="COLOR: #585858"&gt;Description&lt;/td&gt;
																&lt;td&gt;{$RECORD.description}&lt;/td&gt;
															&lt;/tr&gt;
															&lt;tr style="display:{display} !important; display:{display};"&gt;
																&lt;td style="COLOR: #585858" width="20%"&gt;Priority&lt;/td&gt;
																&lt;td&gt;{$RECORD.priority_code}&lt;/td&gt;
															&lt;/tr&gt;
														&lt;/tbody&gt;
													&lt;/table&gt;
												&lt;/div&gt;
											&lt;/td&gt;
										&lt;/tr&gt;
										&lt;tr&gt;
											&lt;td align="left" style="WIDTH: 100%" valign="top"&gt;
												&lt;table style="FONT-SIZE: 11pt; FONT-FAMILY: Metric Regular, arial"&gt;
													&lt;tbody&gt;
														&lt;tr&gt;
															&lt;td bgcolor="#01a982" style="FONT-SIZE: 11pt; HEIGHT: 35px; FONT-FAMILY: Metric Regular, arial; WIDTH: 50%; PADDING-BOTTOM: 1px; TEXT-ALIGN: center; PADDING-TOP: 1px; PADDING-LEFT: 20px; PADDING-RIGHT: 20px"&gt;email_action(resolve,{resolve_action_label},{$RECORD.incident_id},{$RECORD.title},color:#ffffff;font-weight:semibold;text-decoration:none;)&lt;/td&gt;
															&lt;td style="WIDTH: 10px"&gt;
																&amp;nbsp;&lt;/td&gt;
															&lt;td bgcolor="#ffffff" style="FONT-SIZE: 11pt; BORDER-TOP: rgb(1,169,130) 1px solid; HEIGHT: 35px; FONT-FAMILY: Metric Regular, arial; BORDER-RIGHT: rgb(1,169,130) 1px solid; WIDTH: 50%; BORDER-BOTTOM: rgb(1,169,130) 1px solid; PADDING-BOTTOM: 1px; TEXT-ALIGN: center; PADDING-TOP: 1px; PADDING-LEFT: 20px; BORDER-LEFT: rgb(1,169,130) 1px solid; PADDING-RIGHT: 20px"&gt;email_action(comment,{comment_action_label},{$RECORD.incident_id},{$RECORD.title},color: #000000;font-weight:semibold;text-decoration:none;)&lt;/td&gt;
														&lt;/tr&gt;
													&lt;/tbody&gt;
												&lt;/table&gt;
											&lt;/td&gt;
										&lt;/tr&gt;
									&lt;/tbody&gt;
								&lt;/table&gt;
								&lt;div style="FONT-SIZE: 11pt; POSITION: relative; COLOR: #585858; MARGIN-LEFT: 20px; MARGIN-TOP: 20px"&gt;
									&lt;p style="FONT-FAMILY: Metric Semibold, Arial Narrow Bold"&gt;Équipe du centre de services&lt;/p&gt;
									&lt;p&gt;Envoyé par Service Manager. Ne pas répondre directement à cet e-mail.&lt;/p&gt;
								&lt;/div&gt;
							&lt;/td&gt;
						&lt;/tr&gt;
					&lt;/tbody&gt;
				&lt;/table&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
	&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
</htmlcode>
    <language type="string">fr</language>
    <mandant NullValue="1" sctype="array">
      <mandant NullValue="1" type="string"/>
    </mandant>
    <test.record type="string">SD10014</test.record>
    <mail.title type="string">Davantage d'informations sont requises - Requête {$RECORD.incident_id} : {$RECORD.title}</mail.title>
    <sysmodtime NullValue="1" type="dateTime"/>
    <sysmoduser NullValue="1" type="string"/>
    <sysmodcount NullValue="1" type="decimal"/>
  </record>
</recordset>
